# ADISE19_IT
Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [Board](#board)
            * [Ανάγνωση Board](#ανάγνωση-board)
            * [Αρχικοποίηση Board](#αρχικοποίηση-board)
         * [Piece](#piece)
            * [Ανάγνωση Θέσης/Πιονιού](#ανάγνωση-θέσηςπιονιού)
            * [Μεταβολή Θέσης Πιονιού](#μεταβολή-θέσης-πιονιού)
         * [Player](#player)
            * [Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)
            * [Καθορισμός στοιχείων παίκτη](#καθορισμός-στοιχείων-παίκτη)
         * [Status](#status)
            * [Ανάγνωση κατάστασης παιχνιδιού](#ανάγνωση-κατάστασης-παιχνιδιού)
      * [Entities](#entities)
         * [Board](#board-1)
         * [Players](#players)
         * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα: 
https://users.iee.ihu.gr/~asidirop/adise/Lectures-Chess5/



# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/Lectures-Chess4.git`

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'adise19_chess5' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο DB/schema5.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/config_local.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>
```

# Περιγραφή Παιχνιδιού

Κάποιοι κανόνες απλοποιήθηκαν, τα πιόνια έχουν στηθεί στο ταμπό εξαρχής. Επίσης η βαθμίδα των πιονιών είναι ορατή στον αντίπαλο.  

Και οι δύο παίκτες έχουν ένα στρατό που απαρτίζεται από 40 πιόνια συμπεριλαμβανομένης και της Σημαίας. Πρέπει να προσπαθήσετε να αιχμαλωτίσετε τη Σημαία του αντιπάλου καθώς προστατεύετε τη δική σας. Τα νούμερα των πιονιών καθορίζουν το βαθμό τους. Όσο μεγαλύτερος είναι ο αριθμός τόσο υψηλότερος είναι ο βαθμός. Αν ένα πιόνι υψηλότερου βαθμού πάρει ένα πιόνι χαμηλότερου βαθμού, το πιόνι με τον υψηλότερο βαθμό κερδίζει και το άλλο βγαίνει από το παιχνίδι. Η Σημαία μπορεί να κατακτηθεί από οποιοδήποτε πιόνι του αντιπάλου μπορεί να μετακινηθεί.

Τα κόκκινα ξεκινούν ! Οι παίκτες μετακινούν τα πιόνια τους. Μετακινείτε ένα πιόνι σε μια άδεια θέση ή σε μια θέση που βρίσκεται ένα πιόνι του αντιπάλου. Η τελευταία κίνηση ονομάζεται επίθεση. Κάθε παίκτης δικαιούται να μετακινήσει ένα πιόνι σε κάθε γύρο.

Τα πιόνια μετακινούνται ένα τετράγωνο τη φορά μπροστά, πίσω, δεξιά ή αριστερά. Ο Ανιχνευτής εξαιρείται από αυτόν τον κανόνα, όπως εξαιρείται παρακάτω.
Μόνο ένα πιόνι μπορεί να υπάρχει σε κάθε τετράγωνο. Δεν υπάρχει διαγώνια κίνηση ούτε μπορείτε να πηδήξετε τετράγωνα. Δεν μπορείτε, επίσης, να εισέλθετε ή να διασχίσετε τις δύο λίμνες που υπάρχουν στη μέση του ταμπλό.

Η Σημαία και οι Βόμβες δεν μετακινούνται ποτέ.

Οι Ανιχνευτές (2) μπορούν να κινηθούν σε όσα ελεύθερα τετράγωνα θέλουν μπροστά, πίσω και πλαγίως (δεξιά και αριστερά). Δεν μπορούν όμως να πηδήξουν πάνω από τα πιόνια του δικού τους στρατού ή του στρατού του αντιπάλου. Δεν μπορούν να πηδήξουν πάνω από τις λίμνες. Είναι τα μοναδικά πιόνια που μπορούν να επιτεθούν από μεγάλη απόσταση.


## Συντελεστές

Περιγράψτε τις αρμοδιότητες της ομάδας.

Προγραμματιστής 1: Jquery

Προγραμματιστής 2: PHP API

Προγραμματιστής 3: Σχεδιασμός mysql

# Περιγραφή API

## Methods

### Board
#### Ανάγνωση Board
```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).

### Piece
#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/:x/:y/
```

Κάνει την κίνηση του πιονιού από την θέση x,y στην νέα θέση. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.
Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο.

#### Μεταβολή Θέσης Πιονιού

```
PUT /board/piece/:x/:y/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `x`               | Η νέα θέση x                | yes        |
| `y`               | Η νέα θέση y                | yes        |

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο


### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'R'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes        |
| `color`           | To χρώμα που επέλεξε ο παίκτης p. | yes        |


Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).



## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `x`                      | H συντεταγμένη x του τετραγώνου              | 1...10                                |
| `y`                      | H συντεταγμένη y του τετραγώνου              | 1...10                                |
| `b_color`                | To χρώμα του τετραγώνου                      | 'B','R'                             |
| `piece_color`            | To χρώμα του πιονιού                         | 'B','R', null                       |
| `piece`                  | To Πιόνι που υπάρχει στο τετράγωνο           | 'F','B','10','9','8','7', '6','5','4','3','2','1',null |
| `moves`                  | Πίνακας με τα δυνατά τετράγωνα (x,y) που μπορεί να μετακινηθεί το τρέχον πιόνι. Αν δεν υπάρχει πιόνι, ή δεν έχει κάνει login ο χρήστης, ή δεν έχει ξεκινήσει το παιχνίδι ή αν δεν υπάρχουν κινήσεις, τότε το πεδίο δεν υπάρχει. |   |


### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                 | String                              |
| `piece_color`            | To χρώμα που παίζει ο παίκτης                | 'B','R'                             |
| `token  `                | To κρυφό token του παίκτη. Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | HEX |


### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded'     |
| `p_turn`                 | To χρώμα του παίκτη που παίζει        | 'B','R',null                              |
| `result`                 |  To χρώμα του παίκτη που κέρδισε |'B','R',null                              |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp |
